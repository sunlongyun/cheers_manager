<!DOCTYPE html><html><head><meta charset="utf-8" /><title>商品详情</title><link rel="stylesheet" href="css/weui.min.css"><link rel="stylesheet" href="css/jquery-weui.min.css"><link rel="stylesheet" href="css/goodsDetail.css" /></head><body style="">	<div class="swiper-container" data-autoplay='true'		 data-space-between='10' data-pagination='.swiper-pagination'		data-autoplay="1000">		<div class="swiper-wrapper"></div>	</div>	<div class="title"></div>	<span class="price">价格:￥<i class="realPrice">0</i></span>	<span class="originPrice">原价:￥<i class="originPrice">0</i></span>	<div class="line"></div>	<span class="freight">运费：免运费</span>	<span class="sale">累计销量：<i class="salesNum">0</i></span>	<div class="line"></div>	<div class="guige">规格：<i class="spec">12支</i></div>	<div class="line"></div>	<div class="info">		<div class="desc1 act tab" data-tab="0">商品详情</div>		<div class="discus tab" data-tab="1">商品评价</div>	</div>	<div class="descBlock">			</div>	<div class="disBlock" style="display: none;">		暂无评论<a href="javascript:void(0);" onclick="showe()">About</a>	</div>	<div class="cart">		<div class="chat">			<img src="img/chat.png" />		</div>		<div class="car" onclick="showCart()">			<span class="num">0</span> <img src="img/cart.png" />		</div>		<div class="butCart" onclick="addCart()">加入购物车</div>		<div class="butSubmit" onclick="submitOrder()">立即购买</div>		<input type="hidden" id="goodsId" />	</div>	<div id="about" class="weui-popup__container popup-bottom">		<div class="weui-popup__overlay"></div>		<div class="weui-popup__modal"></div>	</div></body><script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script><script type="text/javascript" src="js/common.js"></script><script src="js/jquery-weui.min.js"></script><script type='text/javascript' src='js/swiper.min.js' charset='utf-8'></script><script type="text/javascript">	var goods;//当前页面全局变量	$(function(){		var goodsId = getQueryString("goodsId");		$('#goodsId').val(goodsId);		$('.num').text(getCart().num);		//回显商品 信息		findGoods(goodsId);		 //控制tab切换		 $('.tab').click(function(){		 	var tab = $(this).data('tab');		 	$('.tab').removeClass("act");		 	$(this).addClass('act');		 			 	if(tab==0){		 		$('.disBlock').hide();		 		$('.descBlock').show();		 	}else{		 		$('.descBlock').hide();		 		$('.disBlock').show();		 	}		 });	  	});				//添加购物车
	function addCart(){		var gid = $('#goodsId').val();		var g = goods;		if(g){			g.num = 1;		}else{			alert('参数有误！');			return false;		}		addCacheCart(g);		$('.num').text(getCart().num);		$.toast("添加成功");	}		/**		**提交订单		**/
		function submitOrder(){			$.toast("立刻购买", "text");		}		function showCart(){
			var cart = getCart();
			var html = "";			for(var g in cart.goods ){				var gg = cart.goods[g];				var src = "/file/showFile/"+gg.minPic;				html +='<div class="cartgood">'+			  	'<div class="carimg">'+			  		 '<img src="'+src+'" />'+			  	'</div>'+			     '<div class="cartext">'+gg.title+'</div>'+			     '<div class="carnn">X'+gg.num+'</div>'+			  '</div> <div class="line"></div>';			}			if(html!=''){				$('.weui-popup__modal').html(html);				$("#about").popup();			}		}						/**		** 查询回显商品		**/		function findGoods(goodsId){			$.ajax({				type:'get',				url:'/api/getGoods/'+goodsId,				dataType:'json',				success:function(res){					goods = res.data;					var pic = goods.minPic;					var src = '/file/showFile/'+pic;				  	$(".swiper-wrapper").append('<div class="swiper-slide"><img src="'+src+'"></div>')				    $(".swiper-container").swiper();				    $('.title').html(goods.title);				    $('head title').html(goods.title);				    //详情图片列表回显				    var imgInfoSrcList =goods.imgInfoSrcList;				    if(imgInfoSrcList){				    	$(imgInfoSrcList).each(function(i, src){				    		var iSrc = '/file/showFile/'+src;				    		var img = $("<img/>").attr("src", iSrc);						    $("div.descBlock").append(img);				    	});				    					    }				    				    $("i.realPrice").html(parseInt(goods.price)/100);				    $("i.originPrice").html(parseInt(goods.originPrice)/100);				    $("i.salesNum").html(goods.salesNum);				    $("i.spec").html(goods.spec);				}			});		}
	</script></html>